(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const b of i.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&m(b)}).observe(document,{childList:!0,subtree:!0});function A(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function m(n){if(n.ep)return;n.ep=!0;const i=A(n);fetch(n.href,i)}})();function de(){const e=[];class y{constructor(l,u,h){this.shipType=l,this.life=u,this.color=h,this.destroyed=!1,this.boardPlacement=[]}hit(){this.life>0&&this.life--,this.life<=0&&(this.destroyed=!0)}isHitAtPosition(l){return this.boardPlacement.includes(l)}}function A(p,l,u){return new y(p,l,u)}function m(p){const l=Math.floor(Math.random()*100),u=Math.floor(Math.random()*2),h=[];for(let S=0;S<p.life;S++)u==0?l<=59?h.push(l+S*10):h.push(l-S*10):l%10<=5?h.push(l+S):h.push(l-S);return n(h)}function n(p){return p.map(u=>u<10?"0"+u:u.toString())}function i(p){const l=e.flat();return p.boardPlacement.some(u=>l.includes(u))}function b(p){e.push(p.boardPlacement)}return{occupiedSquares:e,createShip:A,calculatePlacement:m,formatCoordinatesToMatchID:n,positionIsTaken:i,updateOccupiedSquares:b}}function ye(){const e={modal:document.querySelector(".modal"),modalMessage:document.querySelector(".modal-message"),gameModeText:document.querySelector(".game-mode-text"),playerTurnMessage:document.querySelector(".player-turn-message"),topHeader:document.querySelector(".top-header"),bottomHeader:document.querySelector(".bottom-header"),upperPlayerName:document.querySelector(".upper-player-name"),upperPlayerScore:document.querySelector(".upper-player-score"),upperBoardArea:document.querySelector(".upper-board-area"),lowerPlayerScore:document.querySelector(".lower-player-score"),upperPlayerBoard:document.querySelector(".upper-player-board"),lowerBoardArea:document.querySelector(".lower-board-area"),lowerPlayerBoard:document.querySelector(".lower-player-board"),upperPlayerShip1:document.querySelector(".upper-player-ship1"),upperPlayerShip2:document.querySelector(".upper-player-ship2"),upperPlayerShip3:document.querySelector(".upper-player-ship3"),upperPlayerShip4:document.querySelector(".upper-player-ship4"),upperPlayerShip5:document.querySelector(".upper-player-ship5"),lowerPlayerShip1:document.querySelector(".lower-player-ship1"),lowerPlayerShip2:document.querySelector(".lower-player-ship2"),lowerPlayerShip3:document.querySelector(".lower-player-ship3"),lowerPlayerShip4:document.querySelector(".lower-player-ship4"),lowerPlayerShip5:document.querySelector(".lower-player-ship5"),arrangeButtonBox1:document.querySelector(".arrange-button-box1"),arrangeButtonBox2:document.querySelector(".arrange-button-box2"),pvpButton:document.querySelector(".pvp-button"),pvcButton:document.querySelector(".pvc-button"),replayButton:document.querySelector(".replay-button"),player1ShipArrangeButton:document.querySelector(".player1-ship-arrange-button"),player1ArrangeDoneButton:document.querySelector(".player1-arrange-done-button"),player2ArrangeDoneButton:document.querySelector(".player2-arrange-done-button"),player2ShipArrangeButton:document.querySelector(".player2-ship-arrange-button"),contentContainer:document.querySelector(".content")},y=[e.upperPlayerShip1,e.upperPlayerShip2,e.upperPlayerShip3,e.upperPlayerShip4,e.upperPlayerShip5],A=[e.lowerPlayerShip1,e.lowerPlayerShip2,e.lowerPlayerShip3,e.lowerPlayerShip4,e.lowerPlayerShip5],m=[],n=[],i=getComputedStyle(document.documentElement).getPropertyValue("--carrier-color"),b=getComputedStyle(document.documentElement).getPropertyValue("--battleship-color"),p=getComputedStyle(document.documentElement).getPropertyValue("--cruiser-color"),l=getComputedStyle(document.documentElement).getPropertyValue("--submarine-color"),u=getComputedStyle(document.documentElement).getPropertyValue("--destroyer-color"),h=getComputedStyle(document.documentElement).getPropertyValue("--primary-color"),S=getComputedStyle(document.documentElement).getPropertyValue("--secondary-color");function I(){e.topHeader.style.display="block",e.pvpButton.style.display="block",e.pvcButton.style.display="block"}function D(){e.gameModeText.textContent="Mode: PvP",e.upperPlayerName.textContent="Player 2"}function v(){for(let o=0;o<e.contentContainer.children.length;o++)e.contentContainer.children[o].style.display="none"}function w(){e.upperBoardArea.style.display="grid",e.lowerBoardArea.style.display="grid",e.upperPlayerScore.style.display="grid",e.lowerPlayerScore.style.display="grid",O()}function O(){for(let o=0;o<10;o++)for(let s=0;s<10;s++){const d=document.createElement("div");d.classList.add("matrix-item"),d.setAttribute("id",o.toString()+s.toString()),d.setAttribute("data-player","2"),m.push(d);const P=document.createElement("div");P.classList.add("dot"),d.appendChild(P),e.upperPlayerBoard.appendChild(d);const C=document.createElement("div");C.classList.add("matrix-item"),C.setAttribute("id",o.toString()+s.toString()),C.setAttribute("data-player","1"),n.push(C);const L=document.createElement("div");L.classList.add("dot"),C.appendChild(L),e.lowerPlayerBoard.appendChild(C)}}function R(){E(),M()}function E(){e.playerTurnMessage.style.display="flex"}function M(){e.playerTurnMessage.textContent="PLAYER 1 - ARRANGE SHIPS",e.upperBoardArea.style.opacity="50%",e.upperPlayerScore.style.opacity="50%",e.player1ShipArrangeButton.style.display="flex"}function T(){e.playerTurnMessage.textContent="PLAYER 2 - ARRANGE SHIPS",e.lowerBoardArea.style.opacity="50%",e.lowerPlayerScore.style.opacity="50%",e.player2ShipArrangeButton.style.display="flex"}function H(){e.player1ArrangeDoneButton.style.display="flex"}function N(o,s,d){const P=o===1?n:m;s.forEach(C=>{const L=P.find(pe=>pe.getAttribute("id")===C.toString());L&&(L.style.background=d)})}function U(){e.upperBoardArea.style.opacity="100%",e.upperPlayerScore.style.opacity="100%",e.arrangeButtonBox1.style.display="none"}function k(o){(o===1?n:m).forEach(d=>{d.style.background=h})}function G(){e.player2ArrangeDoneButton.style.display="flex"}function V(){e.lowerBoardArea.style.opacity="100%",e.lowerPlayerScore.style.opacity="100%",e.arrangeButtonBox2.style.display="none"}function a(o){e.playerTurnMessage.textContent=`PLAYER ${o} - LAUNCH MISSILE!`}function r(o){o===1?e.lowerBoardArea.classList.remove("board-glow"):e.upperBoardArea.classList.remove("board-glow")}function g(o){o===1?e.upperBoardArea.classList.add("board-glow"):e.lowerBoardArea.classList.add("board-glow")}function $(){e.modalMessage.textContent="Already clicked!",e.modalMessage.style.color="white",e.modal.style.background=S,q()}function x(o){Y(o),o.firstChild.style.background="red"}function Y(o){if(!o.firstChild){const s=document.createElement("div");s.classList.add("dot"),o.appendChild(s)}}function ae(){e.modalMessage.textContent="HIT!",q()}function ne(){e.modalMessage.textContent="MISS!",e.modalMessage.style.color="black",e.modal.style.background="white",q()}function le(o){Y(o),o.firstChild.style.background="white"}function ce(o,s){(o===1?y:A).forEach(P=>{P.getAttribute("name")==s.shipType&&P.classList.add("destroyed-ship")}),z(s)}function z(o){e.modalMessage.textContent=`${o.shipType} destroyed`,q()}function ie(o){e.modalMessage.textContent=`PLAYER ${o} WON!`,q()}function se(o,s){const d=o===1?e.upperPlayerBoard:e.lowerPlayerBoard;Array.from(d.children).forEach(P=>{s.boardPlacement.includes(P.id)&&(P.style.background=s.color)})}function ue(o){v(),e.topHeader.textContent="GAME OVER",e.bottomHeader.textContent=`PLAYER ${o} WON!`,e.topHeader.style.display="block",e.bottomHeader.style.display="block",e.replayButton.style.display="block",e.gameModeText.style.display="none"}function q(){e.modal.style.display="block",setTimeout(()=>{e.modal.style.display="none",e.modalMessage.style.color="white",e.modal.style.background="red"},2e3)}return{elements:e,upperPlayerSquares:m,lowerPlayerSquares:n,player1UIShips:A,player2UIShips:y,carrierColor:i,battleshipColor:b,cruiserColor:p,submarineColor:l,destroyerColor:u,displayHomeScreen:I,updateTextPvPMode:D,clearContent:v,displayGameScreen:w,displayPlayerTurnMessage:E,startShipArrangement:R,setupPlayer1Arrangement:M,setupPlayer2Arrangement:T,displayPlayer1ArrangeDoneButton:H,resetBoardColors:k,setShipPlacementColors:N,displayPlayer2Arrangement:U,resetBoardColors:k,displayPlayer2ArrangeDoneButton:G,displayBoardDoneArranging:V,updatePlayerTurnMessage:a,dimOwnBoard:r,lightUpOpponentsBoard:g,showAlreadyClickedMessage:$,colorSquareHit:x,colorSquareMiss:le,ensureDotExists:Y,showHitMessage:ae,showMissMessage:ne,showDestroyedMessage:z,showGameOverMessage:ie,changeDestroyedShipColor:ce,displayShip:se,displayGameOverScreen:ue}}const c=de(),t=ye(),K="Carrier",j="Battleship",J="Cruiser",Q="Submarine",X="Destroyer",Z=5,ee=4,te=3,re=3,oe=2,f=1,B=2,W=5,me=c.createShip(K,Z,t.carrierColor),Se=c.createShip(j,ee,t.battleshipColor),he=c.createShip(J,te,t.cruiserColor),fe=c.createShip(Q,re,t.submarineColor),ge=c.createShip(X,oe,t.destroyerColor),Pe=c.createShip(K,Z,t.carrierColor),Ae=c.createShip(j,ee,t.battleshipColor),be=c.createShip(J,te,t.cruiserColor),Ce=c.createShip(Q,re,t.submarineColor),Be=c.createShip(X,oe,t.destroyerColor),F=[me,Se,he,fe,ge],_=[Pe,Ae,be,Ce,Be];function we(){let e,y,A=W,m=W;function n(){t.displayHomeScreen(),i()}function i(){t.elements.pvpButton.addEventListener("click",b),t.elements.player1ShipArrangeButton.addEventListener("click",p),t.elements.player2ShipArrangeButton.addEventListener("click",D),t.elements.player1ArrangeDoneButton.addEventListener("click",I),t.elements.player2ArrangeDoneButton.addEventListener("click",v),t.elements.replayButton.addEventListener("click",()=>{location.reload()})}function b(){t.updateTextPvPMode(),t.clearContent(),t.displayGameScreen(),t.startShipArrangement()}function p(){l(f),F.forEach(a=>S(f,a)),t.displayPlayer1ArrangeDoneButton()}function l(a){u(a),t.resetBoardColors(a),h()}function u(a){(a===f?F:_).forEach(g=>g.boardPlacement=[])}function h(){c.occupiedSquares.length=0}function S(a,r){for(r.boardPlacement=c.calculatePlacement(r);c.positionIsTaken(r);)r.boardPlacement=c.calculatePlacement(r);c.occupiedSquares.push(r.boardPlacement),t.setShipPlacementColors(a,r.boardPlacement,r.color)}function I(){t.displayPlayer2Arrangement(),t.resetBoardColors(f),t.setupPlayer2Arrangement()}function D(){l(B),_.forEach(a=>S(B,a)),t.displayPlayer2ArrangeDoneButton()}function v(){t.displayBoardDoneArranging(),t.resetBoardColors(B),w()}function w(){typeof e>"u"?e=Math.floor(Math.random()*2)+1:e=e===f?2:1,e===f?O():R()}function O(){t.updatePlayerTurnMessage(f),t.dimOwnBoard(f),t.lightUpOpponentsBoard(f),E(t.lowerPlayerSquares),M(t.upperPlayerSquares)}function R(){t.updatePlayerTurnMessage(B),t.dimOwnBoard(B),t.lightUpOpponentsBoard(B),E(t.upperPlayerSquares),M(t.lowerPlayerSquares)}function E(a){a.forEach(r=>r.removeEventListener("click",T))}function M(a){a.forEach(r=>r.addEventListener("click",T))}function T(a){let r=a.target;if(r.id||(r=r.parentElement),r.hasAttribute("data-click")){t.showAlreadyClickedMessage();return}r.setAttribute("data-click","");const g=e;y=!1,H(g,r)}function H(a,r){const g=r.id;(a===f?_:F).forEach(x=>{x.isHitAtPosition(g)&&(N(a,x,r),y=!0)}),y||k(r)}function N(a,r,g){r.hit(),t.colorSquareHit(g),t.showHitMessage(a,g),r.destroyed&&U(a,r),V()?G(a):setTimeout(w,200)}function U(a,r){t.changeDestroyedShipColor(a,r),t.displayShip(a,r),a===f?A--:m--}function k(a){t.colorSquareMiss(a),t.showMissMessage(),setTimeout(w,200)}function G(a){t.showGameOverMessage(a),setTimeout(()=>t.displayGameOverScreen(a),3e3)}function V(){if(A===0||m===0)return!0}return{initializeGame:n}}window.onload=()=>{we().initializeGame()};
